<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/DreamerJP/Dreamer/refs/heads/main/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogos Completados</title>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --primary-color: #bb86fc;
            --secondary-color: #03dac6;
            --accent-color: #cf6679;
            --text-primary: #e1e1e1;
            --text-secondary: #b3b3b3;
            --bg-main: rgba(18, 18, 35, 0.98);
            --bg-nav: rgba(18, 18, 35, 0.98);
            --shadow-color: rgba(0,0,0,0.4);
            --shadow-color-strong: rgba(0,0,0,0.6);
            --transition-speed: 0.8s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(ellipse at center, #0a0a0a 0%, #000000 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
        }

        /* Campo de Estrelas */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: -1;
            opacity: 1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: star-travel linear infinite;
        }

        .star.distant {
            width: 1px;
            height: 1px;
            animation-duration: 25s;
            box-shadow: 0 0 2px rgba(255, 255, 255, 0.3);
        }

        .star.medium {
            width: 1.5px;
            height: 1.5px;
            animation-duration: 15s;
            box-shadow: 0 0 3px rgba(255, 255, 255, 0.5);
        }

        .star.close {
            width: 2px;
            height: 2px;
            animation-duration: 8s;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.7);
        }

        .star.blue {
            background: #e6f3ff;
            box-shadow: 0 0 6px rgba(173, 216, 255, 0.6);
        }

        .star.yellow {
            background: #fff8e1;
            box-shadow: 0 0 4px rgba(255, 248, 225, 0.5);
        }

        @keyframes star-travel {
            0% {
                opacity: 0;
                transform: translate(0, 0) scale(0.5);
            }
            10% {
                opacity: 0.3;
            }
            50% {
                opacity: 1;
                transform: translate(var(--dx), var(--dy)) scale(1);
            }
            90% {
                opacity: 0.8;
            }
            100% {
                opacity: 0;
                transform: translate(calc(var(--dx) * 2), calc(var(--dy) * 2)) scale(1.5);
            }
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        /* Navega√ß√£o */
        .navigation {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-nav);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary-color);
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 20px var(--shadow-color-strong);
        }
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        .nav-home {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .nav-home:hover {
            color: var(--primary-color);
            transform: scale(1.05);
        }
        .nav-links {
            display: flex;
            gap: 25px;
            list-style: none;
        }
        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-links a:hover,
        .nav-links a.active {
            color: white;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow-color);
        }
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-primary);
        }

        /* Container principal */
        .main-container {
            max-width: 1400px;
            margin: 100px auto 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: var(--bg-main);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px var(--shadow-color-strong);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .header h1 {
            color: #111 !important;
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow:
                0 0 20px var(--primary-color),
                2px 2px 4px var(--shadow-color);
        }

        .header p {
            color: #111 !important;
            font-size: 1.2em;
            margin-bottom: 30px;
            text-shadow: 0 0 10px var(--primary-color), 1px 1px 2px var(--shadow-color);
        }

        /* Filtros */
        .filters {
            flex: 2;
            min-width: 320px;
            border-radius: 18px !important; /* Bordas mais arredondadas */
            padding: 10px 10px 8px 10px !important;
            box-shadow: 0 2px 6px var(--shadow-color-strong);
            margin-bottom: 0;
            background: rgba(18, 18, 35, 0.6);
        }

        .filter-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 120px;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9em;
            text-align: left;
        }

        .filter-group select, .filter-group input {
            padding: 10px;
            border: 2px solid rgba(187, 134, 252, 0.3);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: rgba(18, 18, 35, 0.8);
            color: var(--text-primary);
        }

        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(187, 134, 252, 0.1);
        }

        .filter-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-tag {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .filter-tag.active {
            background: linear-gradient(45deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 5px 15px rgba(207, 102, 121, 0.4);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 60px;
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(187, 134, 252, 0.2);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Grid de jogos */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        /* Separadores de p√°gina */
        .page-separator {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            padding: 20px 0;
        }

        .separator-line {
            flex: 1;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--primary-color) 20%,
                var(--secondary-color) 50%,
                var(--primary-color) 80%,
                transparent 100%
            );
            border-radius: 1px;
            opacity: 0.7;
        }

        .separator-text {
            background: var(--bg-main);
            color: var(--text-primary);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 5px 15px var(--shadow-color);
            border: 2px solid var(--primary-color);
            backdrop-filter: blur(10px);
            white-space: nowrap;
            animation: separator-pulse 3s ease-in-out infinite;
        }

        @keyframes separator-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 5px 15px var(--shadow-color);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 25px var(--shadow-color-strong);
            }
        }

        /* Pagina√ß√£o */
        .pagination-container {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 40px 0;
            padding: 30px 0;
            background: var(--bg-main);
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow-color-strong);
            backdrop-filter: blur(10px);
        }

        .pagination-info {
            color: var(--text-secondary);
            font-size: 1.1em;
            font-weight: 500;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .pagination-btn {
            background: var(--bg-main);
            color: var(--text-primary);
            border: 2px solid var(--primary-color);
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 45px;
            text-align: center;
        }

        .pagination-btn:hover {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .pagination-btn.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .pagination-btn.prev-btn,
        .pagination-btn.next-btn {
            background: linear-gradient(45deg, var(--accent-color), var(--primary-color));
            color: white;
            min-width: 100px;
        }

        .pagination-btn.prev-btn:hover,
        .pagination-btn.next-btn:hover {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .pagination-dots {
            color: var(--text-secondary);
            font-weight: bold;
            font-size: 1.2em;
            padding: 0 10px;
        }

        .game-card {
            background: var(--bg-main);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-color-strong);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px var(--shadow-color-strong);
        }

        .game-poster {
            width: 100%;
            height: 280px;
            object-fit: cover;
            background: linear-gradient(45deg, rgba(18, 18, 35, 0.8), rgba(22, 33, 62, 0.8));
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .game-poster.loading {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 3em;
        }

        .game-info {
            padding: 10px;
        }

        .game-title {
            font-size: 1em;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 6px;
            line-height: 1.2;
        }

        .game-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .game-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .game-genres {
            display: flex;
            gap: 2px;
            margin-bottom: 8px;
            flex-wrap: nowrap;
            white-space: nowrap;
            overflow-x: auto;
            scrollbar-width: thin;
        }

        .genre-tag {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: 500;
            margin-right: 2px;
            margin-bottom: 2px;
        }

        .game-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .rating-stars {
            display: flex;
            gap: 2px;
        }

        .star {
            color: #ffd700;
            font-size: 1.1em;
        }

        .star.empty {
            color: rgba(255, 255, 255, 0.3);
        }

        .game-plot {
            color: var(--text-secondary);
            font-size: 0.9em;
            line-height: 1.3;
            max-height: 22px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: transparent;
            margin: 2% auto;
            padding: 0;
            border-radius: 24px;
            width: 98%;
            max-width: 1400px;
            max-height: 96vh;
            overflow: hidden;
            position: relative;
            box-shadow: 0 30px 60px var(--shadow-color-strong);
        }

        /* Backdrop como fundo completo */
        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }

        /* Overlay gradiente para melhor legibilidade */
        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                rgba(0,0,0,0.8) 0%,
                rgba(0,0,0,0.3) 30%,
                rgba(0,0,0,0.1) 50%,
                rgba(0,0,0,0.4) 70%,
                rgba(0,0,0,0.9) 100%
            );
            z-index: 1;
            border-radius: 24px;
        }

        /* Header simplificado s√≥ com bot√£o fechar */
        .modal-header {
            position: relative;
            z-index: 3;
            padding: 20px 30px 0;
            display: flex;
            justify-content: flex-end;
        }

        .close {
            color: white;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        /* Container principal do conte√∫do */
        .modal-body {
            position: relative;
            z-index: 2;
            padding: 0 30px 30px;
            height: calc(100vh - 140px);
            max-height: calc(96vh - 140px);
            overflow-y: auto;
        }

        /* Layout principal com poster e informa√ß√µes lado a lado */
        .modal-info {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 40px;
            align-items: start;
            min-height: 500px;
        }

        /* Poster com destaque */
        .modal-poster {
            width: 100%;
            height: 480px;
            object-fit: cover;
            border-radius: 16px;
            box-shadow: 0 20px 40px var(--shadow-color-strong);
            transition: transform 0.3s ease;
        }

        .modal-poster:hover {
            transform: translateY(-5px);
        }

        /* Container das informa√ß√µes */
        .modal-details {
            background: rgba(18, 18, 35, 0.8);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(187, 134, 252, 0.2);
            color: white;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0 0 20px 0;
            text-shadow: 2px 2px 4px var(--shadow-color-strong);
            line-height: 1.2;
        }

        /* Grid de informa√ß√µes */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px 30px;
            margin-bottom: 30px;
        }

        .info-item {
            display: flex;
            align-items: center;
            font-size: 0.95rem;
        }

        .info-item strong {
            color: var(--primary-color);
            margin-right: 8px;
            min-width: 100px;
            font-weight: 600;
        }

        /* Se√ß√£o da sinopse */
        .modal-plot-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(187, 134, 252, 0.2);
        }

        .modal-plot-section h4 {
            color: var(--primary-color);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            font-weight: 600;
        }

        .modal-plot-section p {
            line-height: 1.6;
            font-size: 1rem;
            margin: 0;
            text-align: justify;
        }

        /* A√ß√µes do modal */
        .modal-actions {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(187, 134, 252, 0.2);
        }

        .modal-actions a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .modal-actions a:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px var(--shadow-color-strong);
        }

        /* Estrelas de avalia√ß√£o */
        .stars {
            color: #ffd700;
            font-size: 1.1rem;
            margin-left: 5px;
        }

        /* Scrollbar customizada */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: rgba(187, 134, 252, 0.1);
            border-radius: 4px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: rgba(187, 134, 252, 0.3);
            border-radius: 4px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: rgba(187, 134, 252, 0.5);
        }

        /* Stats */
        .stats {
            background: var(--bg-main);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px var(--shadow-color-strong);
            backdrop-filter: blur(10px);
        }

        .stats h3 {
            color: var(--text-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--bg-nav);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 5px 20px var(--shadow-color-strong);
                border-radius: 0 0 15px 15px;
            }
            .nav-links.active {
                display: flex;
            }
            .menu-toggle {
                display: block;
            }
            .main-container {
                max-width: 100vw;
                padding: 0;
            }
            .header h1 {
                font-size: 2.2em;
            }
            .filter-row {
                flex-direction: column;
                gap: 15px;
            }
            .filter-group {
                min-width: 100%;
            }
            .games-grid {
                gap: 8px;
                padding: 0 4px;
            }
            .game-card {
                margin: 0;
                border-radius: 10px;
            }
            .page-separator {
                margin: 15px 0;
                padding: 10px 0;
                gap: 8px;
            }
            .separator-text {
                font-size: 0.8em;
                padding: 6px 12px;
            }
            .modal-content {
                width: 100%;
                margin: 0;
                border-radius: 0;
                max-height: 100vh;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px;
            }
            .header h1 {
                font-size: 1.8em;
            }
            .main-container {
                max-width: 100vw;
                padding: 0;
            }
            .games-grid {
                gap: 8px;
                padding: 0 4px;
            }
            .game-card {
                margin: 0;
                border-radius: 8px;
            }
            .modal-content {
                width: 100%;
                margin: 0;
                border-radius: 0;
                max-height: 100vh;
            }
            .modal-title {
                font-size: 1.8rem;
            }
            .modal-details {
                padding: 15px;
            }
            .modal-body {
                padding: 0 4px 4px;
            }
            .info-grid {
                gap: 8px 10px;
            }
            .info-item {
                font-size: 0.9rem;
            }
            .info-item strong {
                min-width: 70px;
            }
        }

        /* Unificar header, filtros e estat√≠sticas */
        .unified-header {
            background: url('https://github.com/DreamerJP/site-images/blob/main/Jogos/GameCollection.jpg?raw=true') center center/cover no-repeat;
            position: relative;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.10);
            padding: 60px 60px 24px 60px; /* Aumentado o tamanho geral e reduzido o padding inferior */
            margin-bottom: 40px;
            margin-top: 80px;
            min-height: 520px; /* Garante altura maior do modal principal */
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .unified-header > * {
            position: relative;
            z-index: 2;
        }
        .filters-stats-flex {
            display: flex;
            gap: 40px;
            align-items: flex-end; /* Alinha as caixas na parte de baixo */
            justify-content: space-between;
            flex-wrap: wrap;
            margin-top: auto;
            margin-bottom: 0;
        }
        .stats-compact {
            flex: 1;
            min-width: 220px;
            background: rgba(18, 18, 35, 0.6);
            border-radius: 18px !important;
            padding: 8px 8px 4px 8px !important;
            box-shadow: 0 2px 6px var(--shadow-color-strong); /* Igual √† .filters */
            margin-bottom: 0;
            backdrop-filter: blur(10px);
        }
        .stats-compact .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .stat-card {
            background: rgba(187, 134, 252, 0.1);
            border-radius: 10px;
            box-shadow: 0 2px 8px var(--shadow-color);
            padding: 10px 0 6px 0;
            text-align: center;
        }
        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--text-primary);
        }
        .stat-label {
            font-size: 0.9em;
            color: var(--text-secondary);
        }
        @media (max-width: 900px) {
            .filters-stats-flex {
                flex-direction: column;
                gap: 20px;
                align-items: stretch;
            }
            .filters,
            .stats-compact {
                width: 100%;
                min-width: unset;
                margin-bottom: 0;
                margin-top: 0;
            }
        }
        @media (max-width: 600px) {
            .filters,
            .stats-compact {
                padding: 6px 4px 4px 4px !important;
                border-radius: 12px !important;
            }
            .filter-tag,
            .stat-value,
            .stat-label {
                font-size: 0.95em;
            }
            .filters .filter-group label {
                font-size: 0.85em;
            }
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .modal-info {
                grid-template-columns: 280px 1fr;
                gap: 25px;
            }

            .modal-poster {
                height: 420px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                max-width: 100vw;
                padding: 0;
            }
            .games-grid {
                padding: 0;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }

            .modal-info {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .modal-poster {
                height: 400px;
                max-width: 280px;
                justify-self: center;
            }

            .modal-title {
                font-size: 2rem;
            }

            .modal-body {
                padding: 0 20px 20px;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                max-width: 100vw;
                padding: 0;
            }
            .games-grid {
                padding: 0;
            }

            .modal-content {
                width: 100%;
                margin: 0;
                border-radius: 0;
            }

            .modal-info {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .modal-poster {
                height: 300px;
                max-width: 100%;
                justify-self: center;
            }

            .modal-title {
                font-size: 1.8rem;
            }

            .modal-body {
                padding: 0 20px 20px;
            }
        }

        .header-overlay-fix {
            position: absolute;
            inset: 0;
            background: rgba(255,255,255,0.75);
            border-radius: 20px;
            z-index: 1;
            pointer-events: none;
        }
        @media (max-width: 600px) {
            .header-overlay-fix {
                border-radius: 0 !important;
            }
            .unified-header {
                border-radius: 0 !important;
            }
        }

        /* Campo de busca espec√≠fico */
        #searchInput {
            min-width: 250px;
            width: 100%;
            max-width: 350px;
        }

        /* Campo de ano espec√≠fico */
        #yearFilter {
            min-width: 80px;
            width: 100%;
            max-width: 100px;
        }

        /* Responsividade para o campo de busca */
        @media (max-width: 768px) {
            #searchInput {
                min-width: 200px;
                max-width: 100%;
            }
            #yearFilter {
                min-width: 100px;
                max-width: 120px;
            }
        }

        @media (max-width: 480px) {
            #searchInput {
                min-width: 180px;
                max-width: 100%;
            }
            #yearFilter {
                min-width: 80px;
                max-width: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Campo de Estrelas -->
    <div class="starfield" id="starfield"></div>

    <!-- Navega√ß√£o -->
    <nav class="navigation">
        <div class="nav-container">
            <a href="index.html" class="nav-home">üè† Home</a>
            <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="animes.html">üéå Animes</a></li>
                <li><a href="filmes.html">üé¨ Filmes</a></li>
                <li><a href="jogos-completados.html" class="active">üéÆ Jogos Completados</a></li>
                <li><a href="jogos.html">üéÆ Jogos</a></li>
                <li><a href="musicas.html">üéµ M√∫sicas</a></li>
                <li><a href="imagens.html">üñºÔ∏è Imagens</a></li>
                <li><a href="videos.html">üìπ V√≠deos</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-container">
        <div class="header unified-header">
            <div class="header-overlay-fix"></div>
            <h1><span style="font-size:1.2em;">üéÆ</span> Jogos Completados</h1>
            <p>MINHA COLE√á√ÉO DE JOGOS ZERADOS</p>
            <div class="filters-stats-flex">
                <div class="filters">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>Categoria:</label>
                            <div class="filter-tags">
                                <button class="filter-tag active" onclick="filterByCategory('favorites')">‚≠ê Favoritos</button>
                                <button class="filter-tag" onclick="filterByCategory('all')">üéÆ Todos</button>
                                <button class="filter-tag" onclick="filterByCategory('recent')">üÜï Recentes</button>
                            </div>
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>üîç Buscar:</label>
                            <input type="text" id="searchInput" placeholder="Digite o T√≠tulo, Desenvolvedora, ou G√™nero" oninput="searchGames()">
                        </div>
                        <div class="filter-group">
                            <label>üé≠ G√™nero:</label>
                            <select id="genreFilter" onchange="filterGames()">
                                <option value="">Todos os g√™neros</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>üìÖ Ano:</label>
                            <select id="yearFilter" onchange="filterGames()">
                                <option value="">Todos os anos</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>‚≠ê Nota:</label>
                            <select id="ratingFilter" onchange="filterGames()">
                                <option value="">Notas</option>
                                <option value="9">9+ estrelas</option>
                                <option value="8">8+ estrelas</option>
                                <option value="7">7+ estrelas</option>
                                <option value="6">6+ estrelas</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="stats stats-compact">
                    <h3 style="font-size:1.1em; margin-bottom:10px; text-align:center;">üìä Estat√≠sticas da Cole√ß√£o</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalGames">0</div>
                            <div class="stat-label">Total de Jogos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="currentGames">0</div>
                            <div class="stat-label">Exibindo</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="genresCount">0</div>
                            <div class="stat-label">G√™neros</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="avgRating">0</div>
                            <div class="stat-label">Nota M√©dia</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Carregando jogos completados...</p>
        </div>
        <div class="games-grid" id="gamesGrid"></div>
    </div>

    <!-- Modal -->
    <div class="modal" id="gameModal">
        <div class="modal-content">
            <!-- Backdrop como fundo completo -->
            <img class="modal-backdrop" id="modalBackdrop" src="" alt="">

            <!-- Header apenas com bot√£o fechar -->
            <div class="modal-header">
                <span class="close" onclick="closeModal()">&times;</span>
            </div>

            <!-- Corpo do modal -->
            <div class="modal-body">
                <div class="modal-info">
                    <!-- Poster do jogo -->
                    <img class="modal-poster" id="modalPoster" src="" alt="">

                    <!-- Detalhes do jogo -->
                    <div class="modal-details" id="modalDetails">
                        <!-- Conte√∫do ser√° inserido pelo JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vari√°vel global para quantidade de jogos por p√°gina
        const gamesPerPage = 24;

        // Fun√ß√£o auxiliar para extrair o ano do jogo
        const getGameYear = (game) => {
            const details = gamesWithDetails.get(game.slug);
            if (details && details.year && details.year !== 'N/A') {
                return parseInt(details.year, 10);
            }
            // Regex robusta para diferentes formatos de t√≠tulo
            const yearMatch = game.title.match(/\((\d{4})\)$/) ||
                              game.title.match(/(\d{4})$/) ||
                              game.title.match(/\[(\d{4})\]/);
            if (yearMatch) {
                const year = parseInt(yearMatch[1], 10);
                if (year >= 1970 && year <= new Date().getFullYear() + 5) {
                    return year;
                }
            }
            return 0; // Se n√£o encontrar, joga para o fim da lista
        };

        // Fun√ß√£o centralizada para ordenar e selecionar os jogos recentes
        function getSortedRecentGames() {
            return [...allGames]
                .sort((a, b) => getGameYear(b) - getGameYear(a))
                .slice(0, 24);
        }

        // Fun√ß√£o debounce para reordenar e renderizar recentes dinamicamente
        function debouncedResortAndRender() {
            clearTimeout(resortDebounceTimer);
            resortDebounceTimer = setTimeout(() => {
                try {
                    if (currentCategory === 'recent') {
                        displayedGames = getSortedRecentGames();
                        renderGamesSmart(displayedGames);
                    }
                } catch (error) {
                    console.error('Erro ao reordenar jogos recentes dinamicamente:', error);
                }
            }, 500);
        }

        // Fun√ß√£o para criar campo de estrelas
        function createStarfield() {
            const starfield = document.getElementById('starfield');
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;

            starfield.innerHTML = '';

            // Estrelas em movimento
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';

                const angle = Math.random() * 2 * Math.PI;
                const initialRadius = Math.random() * 50 + 10;
                const startX = centerX + Math.cos(angle) * initialRadius;
                const startY = centerY + Math.sin(angle) * initialRadius;

                const directionX = Math.cos(angle);
                const directionY = Math.sin(angle);

                const maxDistance = Math.sqrt(Math.pow(window.innerWidth, 2) + Math.pow(window.innerHeight, 2));
                const travelDistance = maxDistance * (0.8 + Math.random() * 0.4);

                const starType = Math.random();
                if (starType < 0.6) {
                    star.classList.add('distant');
                } else if (starType < 0.85) {
                    star.classList.add('medium');
                } else {
                    star.classList.add('close');
                }

                const colorType = Math.random();
                if (colorType < 0.1) {
                    star.classList.add('blue');
                } else if (colorType < 0.2) {
                    star.classList.add('yellow');
                }

                star.style.left = startX + 'px';
                star.style.top = startY + 'px';
                star.style.setProperty('--dx', (directionX * travelDistance) + 'px');
                star.style.setProperty('--dy', (directionY * travelDistance) + 'px');
                star.style.animationDelay = Math.random() * 20 + 's';

                starfield.appendChild(star);
            }

            // Estrelas estacion√°rias
            for (let i = 0; i < 50; i++) {
                const staticStar = document.createElement('div');
                staticStar.className = 'star distant';
                staticStar.style.position = 'absolute';
                staticStar.style.left = Math.random() * window.innerWidth + 'px';
                staticStar.style.top = Math.random() * window.innerHeight + 'px';
                staticStar.style.opacity = Math.random() * 0.3 + 0.1;
                staticStar.style.animation = `twinkle ${2 + Math.random() * 3}s ease-in-out infinite alternate`;

                starfield.appendChild(staticStar);
            }
        }

        // Dados globais
        let allGames = [];
        let displayedGames = [];
        let currentCategory = 'favorites';
        let gamesWithDetails = new Map();
        let resortDebounceTimer;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            createStarfield();

            // Recriar estrelas no resize
            window.addEventListener('resize', createStarfield);

            loadGames();
        });

        // Carregar jogos do JSON
        async function loadGames() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/DreamerJP/site-images/refs/heads/main/Jogos/minha_lista_jogos.json');
                const data = await response.json();

                allGames = data.games || [];

                // Iniciar com favoritos (primeiros 24)
                await loadFavorites();

                // Carregar filtros
                await waitForAllDetailsAndPopulateFilters();
                updateStats();

            } catch (error) {
                console.error('Erro ao carregar jogos:', error);
                document.getElementById('loading').innerHTML = '<p>‚ùå Erro ao carregar jogos. Tente novamente mais tarde.</p>';
            }
        }

        // Carregar jogos favoritos
        async function loadFavorites() {
            const favorites = allGames.slice(0, 24);
            displayedGames = favorites;

            // Renderizar imediatamente com dados b√°sicos
            renderGamesSmart(displayedGames);

            // Carregar detalhes em paralelo
            await loadGameDetailsBackground(favorites);
            // Ap√≥s carregar favoritos, iniciar carregamento de todos os jogos em background
            if (allGames.length > 0) {
                loadGameDetailsBackground(allGames);
            }
        }

        // Renderizar jogos inteligentes (completo se j√° carregado, sen√£o loading)
        function renderGamesSmart(games) {
            const grid = document.getElementById('gamesGrid');
            document.getElementById('loading').style.display = 'none';

            if (games.length === 0) {
                grid.innerHTML = '<div class="loading"><p>üéÆ Nenhum jogo encontrado com os filtros aplicados.</p></div>';
                return;
            }

            const totalPages = Math.ceil(games.length / gamesPerPage);
            const currentPage = 1; // Sempre come√ßa na p√°gina 1

            // Calcular jogos da p√°gina atual
            const startIndex = (currentPage - 1) * gamesPerPage;
            const endIndex = startIndex + gamesPerPage;
            const currentGames = games.slice(startIndex, endIndex);

            // Renderizar jogos da p√°gina atual
            let html = currentGames.map(game => {
                const details = gamesWithDetails.get(game.slug);
                if (details) {
                    const rating = normalizeRating(details.rating);
                    const stars = generateStars(rating);
                    return `
                        <div class="game-card" onclick="openGameModal('${game.slug}')" data-slug="${game.slug}">
                            <div class="game-poster${details.cover ? '' : ' loading'}" style="background-image: ${details.cover ? `url(${details.cover})` : 'none'}">
                                ${!details.cover ? 'üéÆ' : ''}
                            </div>
                            <div class="game-info">
                                <h3 class="game-title">${details.title}</h3>
                                <div class="game-meta">
                                    <span>üìÖ ${details.year}</span>
                                    <span>üéÆ ${details.developer}</span>
                                </div>
                                <div class="game-genres">
                                    ${details.genre !== 'N/A' ? details.genre.split(',').slice(0, 1).map(g =>
                                        `<span class="genre-tag">${g.trim()}</span>`
                                    ).join('') : '<span class="genre-tag">G√™nero n√£o dispon√≠vel</span>'}
                                </div>
                                <div class="game-rating">
                                    <div class="rating-stars">${stars}</div>
                                    <span>${normalizeRating(details.rating)}/10</span>
                                </div>
                                <p class="game-plot">Sinopse (EN): ${details.summary ? details.summary.split(' ').slice(0,2).join(' ') + '...' : '...'}</p>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="game-card" onclick="openGameModal('${game.slug}')" data-slug="${game.slug}">
                            <div class="game-poster loading">üéÆ</div>
                            <div class="game-info">
                                <h3 class="game-title">${game.title}</h3>
                                <div class="game-meta">
                                    <span>üìÖ Carregando...</span>
                                    <span>üéÆ Carregando...</span>
                                </div>
                                <div class="game-genres">
                                    <span class="genre-tag">Carregando g√™neros...</span>
                                </div>
                                <div class="game-rating">
                                    <div class="rating-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                    <span>-/10</span>
                                </div>
                                <p class="game-plot">Carregando informa√ß√µes...</p>
                            </div>
                        </div>
                    `;
                }
            }).join('');

            // Adicionar pagina√ß√£o se houver mais de uma p√°gina
            if (totalPages > 1) {
                html += createPaginationHTML(currentPage, totalPages, games.length);
            }

            grid.innerHTML = html;
        }

        // Criar HTML da pagina√ß√£o
        function createPaginationHTML(currentPage, totalPages, totalGames) {
            const startGame = (currentPage - 1) * gamesPerPage + 1;
            const endGame = Math.min(currentPage * gamesPerPage, totalGames);

            let paginationHTML = `
                <div class="pagination-container">
                    <div class="pagination-info">
                        <span>Mostrando ${startGame}-${endGame} de ${totalGames} jogos</span>
                    </div>
                    <div class="pagination-controls">
            `;

            // Bot√£o "Anterior"
            if (currentPage > 1) {
                paginationHTML += `<button class="pagination-btn prev-btn" onclick="changePage(${currentPage - 1})">‚Üê Anterior</button>`;
            }

            // Bot√µes de p√°gina
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            // Primeira p√°gina
            if (startPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="changePage(1)">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="pagination-dots">...</span>`;
                }
            }

            // P√°ginas do meio
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === currentPage;
                paginationHTML += `<button class="pagination-btn${isActive ? ' active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }

            // √öltima p√°gina
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="pagination-dots">...</span>`;
                }
                paginationHTML += `<button class="pagination-btn" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            // Bot√£o "Pr√≥ximo"
            if (currentPage < totalPages) {
                paginationHTML += `<button class="pagination-btn next-btn" onclick="changePage(${currentPage + 1})">Pr√≥ximo ‚Üí</button>`;
            }

            paginationHTML += `
                    </div>
                </div>
            `;

            return paginationHTML;
        }

        // Fun√ß√£o para mudar de p√°gina
        function changePage(pageNumber) {
            const startIndex = (pageNumber - 1) * gamesPerPage;
            const endIndex = startIndex + gamesPerPage;
            const currentGames = displayedGames.slice(startIndex, endIndex);

            // Renderizar jogos da nova p√°gina
            const grid = document.getElementById('gamesGrid');
            let html = currentGames.map(game => {
                const details = gamesWithDetails.get(game.slug);
                if (details) {
                    const rating = normalizeRating(details.rating);
                    const stars = generateStars(rating);
                    return `
                        <div class="game-card" onclick="openGameModal('${game.slug}')" data-slug="${game.slug}">
                            <div class="game-poster${details.cover ? '' : ' loading'}" style="background-image: ${details.cover ? `url(${details.cover})` : 'none'}">
                                ${!details.cover ? 'üéÆ' : ''}
                            </div>
                            <div class="game-info">
                                <h3 class="game-title">${details.title}</h3>
                                <div class="game-meta">
                                    <span>üìÖ ${details.year}</span>
                                    <span>üéÆ ${details.developer}</span>
                                </div>
                                <div class="game-genres">
                                    ${details.genre !== 'N/A' ? details.genre.split(',').slice(0, 1).map(g =>
                                        `<span class="genre-tag">${g.trim()}</span>`
                                    ).join('') : '<span class="genre-tag">G√™nero n√£o dispon√≠vel</span>'}
                                </div>
                                <div class="game-rating">
                                    <div class="rating-stars">${stars}</div>
                                    <span>${normalizeRating(details.rating)}/10</span>
                                </div>
                                <p class="game-plot">Sinopse (EN): ${details.summary ? details.summary.split(' ').slice(0,2).join(' ') + '...' : '...'}</p>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="game-card" onclick="openGameModal('${game.slug}')" data-slug="${game.slug}">
                            <div class="game-poster loading">üéÆ</div>
                            <div class="game-info">
                                <h3 class="game-title">${game.title}</h3>
                                <div class="game-meta">
                                    <span>üìÖ Carregando...</span>
                                    <span>üéÆ Carregando...</span>
                                </div>
                                <div class="game-genres">
                                    <span class="genre-tag">Carregando g√™neros...</span>
                                </div>
                                <div class="game-rating">
                                    <div class="rating-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                    <span>-/10</span>
                                </div>
                                <p class="game-plot">Carregando informa√ß√µes...</p>
                            </div>
                        </div>
                    `;
                }
            }).join('');

            // Adicionar pagina√ß√£o atualizada
            const totalPages = Math.ceil(displayedGames.length / gamesPerPage);
            html += createPaginationHTML(pageNumber, totalPages, displayedGames.length);

            grid.innerHTML = html;

            // Scroll suave para o topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Carregar detalhes em background
        function loadGameDetailsBackground(games) {
            const BATCH_SIZE = 8; // M√°ximo simult√¢neo

            for (let i = 0; i < games.length; i += BATCH_SIZE) {
                const batch = games.slice(i, i + BATCH_SIZE);

                // Processar lote (dados j√° est√£o completos no JSON)
                batch.forEach((game) => {
                    if (!gamesWithDetails.has(game.slug)) {
                        // Os dados j√° est√£o completos no JSON, apenas armazenar
                        gamesWithDetails.set(game.slug, game);

                        // Atualizar card individual
                        updateGameCard(game.slug, game);

                        // Atualiza√ß√£o din√¢mica dos recentes
                        debouncedResortAndRender();
                    }
                });

                // Pequeno delay entre lotes para n√£o travar a UI
                if (i + BATCH_SIZE < games.length) {
                    setTimeout(() => {}, 10);
                }
            }

            updateStats();
        }

        // Buscar detalhes no IGDB
        async function fetchGameDetailsIGDB(title) {
            try {
                // Extrair ano do t√≠tulo se existir
                const yearMatch = title.match(/\((\d{4})\)/);
                const cleanTitle = title.replace(/\(.*?\)/g, '').trim();
                const year = yearMatch ? yearMatch[1] : null;

                // Usar IGDB API (simulado por enquanto - voc√™ precisar√° configurar uma API key real)
                // Por enquanto, retornar dados padr√£o com algumas informa√ß√µes b√°sicas
                return {
                    cover: null,
                    year: year || 'N/A',
                    genre: 'A√ß√£o, Aventura',
                    developer: 'Desenvolvedora',
                    publisher: 'Publicadora',
                    summary: 'Sinopse n√£o dispon√≠vel.',
                    rating: '8.5',
                    platforms: 'PC, PlayStation, Xbox'
                };

            } catch (error) {
                console.error('Erro ao buscar no IGDB:', error);
                return getDefaultGameData();
            }
        }

        // Dados padr√£o para jogos sem detalhes
        function getDefaultGameData() {
            return {
                cover: null,
                year: 'N/A',
                genre: 'N/A',
                developer: 'N/A',
                publisher: 'N/A',
                summary: 'Informa√ß√µes n√£o dispon√≠veis.',
                rating: 'N/A',
                platforms: 'N/A'
            };
        }

        // Fun√ß√£o helper para normalizar rating (IGDB usa 0-100, converter para 0-10)
        function normalizeRating(rating) {
            const numRating = parseFloat(rating) || 0;
            return Math.round((numRating / 10) * 10) / 10; // Divide por 10 e arredonda para 1 casa decimal
        }

        // Gerar estrelas para avalia√ß√£o
        function generateStars(rating) {
            const fullStars = Math.floor(rating / 2);
            const halfStar = (rating % 2) >= 1;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);

            let stars = '';
            for (let i = 0; i < fullStars; i++) stars += '<span class="star">‚òÖ</span>';
            if (halfStar) stars += '<span class="star">‚òÖ</span>';
            for (let i = 0; i < emptyStars; i++) stars += '<span class="star empty">‚òÜ</span>';

            return stars;
        }

        // Filtrar por categoria
        async function filterByCategory(category) {
            currentCategory = category;

            // Atualizar bot√µes ativos
            document.querySelectorAll('.filter-tag').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Resetar outros filtros
            document.getElementById('searchInput').value = '';
            document.getElementById('genreFilter').value = '';
            document.getElementById('yearFilter').value = '';
            document.getElementById('ratingFilter').value = '';

            let gamesToShow = [];

            switch(category) {
                case 'favorites':
                    gamesToShow = allGames.slice(0, 24);
                    break;
                case 'recent':
                    gamesToShow = getSortedRecentGames();
                    break;
                case 'all':
                    gamesToShow = allGames;
                    break;
                default:
                    gamesToShow = allGames.slice(0, 24);
            }

            displayedGames = gamesToShow;

            // Renderizar b√°sico primeiro
            renderGamesSmart(displayedGames);

            // Carregar detalhes em background
            loadGameDetailsBackground(gamesToShow);
        }

        // Buscar jogos
        function searchGames() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let baseList = allGames;
            if (searchTerm === '') {
                renderGamesSmart(baseList);
                updateCurrentCount(baseList.length);
                return;
            }

            const filteredGames = baseList.filter(game => {
                const details = gamesWithDetails.get(game.slug) || game;
                return details.title.toLowerCase().includes(searchTerm) ||
                        (details.developer && details.developer.toLowerCase().includes(searchTerm)) ||
                        (details.genre && details.genre.toLowerCase().includes(searchTerm));
            });

            renderGamesSmart(filteredGames);
            updateCurrentCount(filteredGames.length);
        }

        // Filtrar jogos por g√™nero, ano e nota
        function filterGames() {
            const genreFilter = document.getElementById('genreFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;
            const ratingFilter = document.getElementById('ratingFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let baseList = allGames;
            let filteredGames = baseList.filter(game => {
                const details = gamesWithDetails.get(game.slug) || game;
                // Filtro de busca
                const matchesSearch = searchTerm === '' ||
                    details.title.toLowerCase().includes(searchTerm) ||
                    (details.developer && details.developer.toLowerCase().includes(searchTerm)) ||
                    (details.genre && details.genre.toLowerCase().includes(searchTerm));
                // Filtro de g√™nero
                const matchesGenre = genreFilter === '' ||
                    (details.genre && details.genre.toLowerCase().includes(genreFilter.toLowerCase()));
                // Filtro de ano
                const matchesYear = yearFilter === '' || details.year === yearFilter;
                // Filtro de nota
                const gameRating = normalizeRating(details.rating);
                const matchesRating = ratingFilter === '' || gameRating >= parseFloat(ratingFilter);
                return matchesSearch && matchesGenre && matchesYear && matchesRating;
            });

            renderGamesSmart(filteredGames);
            updateCurrentCount(filteredGames.length);
        }

        // Popular filtros
        async function populateFilters() {
            const genres = new Set();
            const years = new Set();

            // 1. Dados b√°sicos
            allGames.forEach(game => {
                // Ano do t√≠tulo (ex: "The Last of Us (2013)")
                const yearMatch = game.title?.match(/\((\d{4})\)/);
                if (yearMatch) years.add(yearMatch[1]);
                if (game.year && game.year !== 'N/A') years.add(game.year);

                // G√™nero b√°sico, se existir
                if (game.genre && game.genre !== 'N/A') {
                    game.genre.split(',').forEach(g => genres.add(g.trim()));
                }
            });

            // 2. Detalhes carregados
            gamesWithDetails.forEach(details => {
                if (details.genre && details.genre !== 'N/A') {
                    details.genre.split(',').forEach(g => genres.add(g.trim()));
                }
                if (details.year && details.year !== 'N/A') {
                    years.add(details.year);
                }
            });

            // Atualizar selects
            const genreSelect = document.getElementById('genreFilter');
            const currentGenre = genreSelect.value;
            genreSelect.innerHTML = '<option value="">G√™neros</option>';
            [...genres].sort().forEach(genre => {
                const option = document.createElement('option');
                option.value = genre;
                option.textContent = genre;
                genreSelect.appendChild(option);
            });
            genreSelect.value = currentGenre;

            const yearSelect = document.getElementById('yearFilter');
            const currentYear = yearSelect.value;
            yearSelect.innerHTML = '<option value="">Anos</option>';
            [...years].sort((a, b) => b - a).forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            });
            yearSelect.value = currentYear;
        }

        // Atualizar estat√≠sticas
        function updateStats() {
            const totalGames = allGames.length;
            const currentGames = displayedGames.length;

            // Calcular g√™neros √∫nicos
            const genres = new Set();
            gamesWithDetails.forEach(details => {
                if (details.genre && details.genre !== 'N/A') {
                    details.genre.split(',').forEach(g => genres.add(g.trim()));
                }
            });

            // Calcular nota m√©dia
            let totalRating = 0;
            let ratedGames = 0;
            gamesWithDetails.forEach(details => {
                const rating = normalizeRating(details.rating);
                if (!isNaN(rating) && rating > 0) {
                    totalRating += rating;
                    ratedGames++;
                }
            });
            const avgRating = ratedGames > 0 ? (totalRating / ratedGames).toFixed(1) : 0;

            // Atualizar DOM
            document.getElementById('totalGames').textContent = totalGames;
            document.getElementById('currentGames').textContent = currentGames;
            document.getElementById('genresCount').textContent = genres.size;
            document.getElementById('avgRating').textContent = avgRating;
        }

        // Atualizar contador atual
        function updateCurrentCount(count) {
            document.getElementById('currentGames').textContent = count;
        }

        // Abrir modal do jogo
        function openGameModal(slug) {
            const details = gamesWithDetails.get(slug);
            if (!details) return;

            const modal = document.getElementById('gameModal');
            const modalPoster = document.getElementById('modalPoster');
            const modalBackdrop = document.getElementById('modalBackdrop');
            const modalDetails = document.getElementById('modalDetails');

            modalPoster.src = details.cover || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZjhmOWZhIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNDAiIGZpbGw9IiM2Yzc1N2QiPvCfjoY8L3RleHQ+Cjwvc3ZnPg==';

            // Fundo do modal - usar imagem de fundo de alta resolu√ß√£o se dispon√≠vel, sen√£o gradiente
            if (details.background && details.background !== 'N/A') {
                modalBackdrop.src = details.background;
                modalBackdrop.style.background = 'none';
                modalBackdrop.style.opacity = '0.8'; // Reduzir opacidade para melhor legibilidade
            } else {
                modalBackdrop.src = '';
                modalBackdrop.style.background = 'linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(22, 33, 62, 0.9) 50%, rgba(15, 52, 96, 0.9) 100%)';
                modalBackdrop.style.opacity = '1';
            }

            const rating = parseFloat(details.rating) || 0;
            const stars = generateStars(rating);

            modalDetails.innerHTML = `
                <h2 class="modal-title">${details.title}</h2>

                <div class="info-grid">
                    <div class="info-item">
                        <strong>üìÖ Ano:</strong> ${details.year}
                    </div>
                    <div class="info-item">
                        <strong>üéÆ Desenvolvedora:</strong> ${details.developer}
                    </div>
                    <div class="info-item">
                        <strong>üè≠ Publicadora:</strong> ${details.publisher}
                    </div>
                    <div class="info-item">
                        <strong>üé≠ G√™nero:</strong> ${details.genre}
                    </div>
                    <div class="info-item">
                        <strong>üíª Plataformas:</strong> ${details.platforms}
                    </div>
                    <div class="info-item">
                        <strong>‚≠ê Avalia√ß√£o:</strong> ${normalizeRating(details.rating)}/10 <span class="stars">${stars}</span>
                    </div>
                </div>

                <div class="modal-plot-section">
                    <h4>üìñ Sinopse <small style="color: #888; font-size: 0.8em;">(em ingl√™s)</small></h4>
                    <p>${details.summary}</p>
                </div>

                <div class="modal-actions">
                    <a href="${details.url}" target="_blank">üîó Ver no IGDB</a>
                </div>
            `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Fechar modal
        function closeModal() {
            const modal = document.getElementById('gameModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Fechar modal clicando fora
        window.onclick = function(event) {
            const modal = document.getElementById('gameModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Menu mobile toggle
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Fechar menu ao clicar fora
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('.navigation');
            const navLinks = document.getElementById('navLinks');
            if (!nav.contains(e.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Atalhos do teclado
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
            if (e.key === '/' && !e.ctrlKey && !e.altKey) {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
        });

        // Lazy loading para quando carregar todos os jogos
        let isLoadingMore = false;

        window.addEventListener('scroll', function() {
            if (currentCategory === 'all' && !isLoadingMore) {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight;

                if (scrollTop + windowHeight >= documentHeight - 1000) {
                    loadMoreGames();
                }
            }
        });

        async function loadMoreGames() {
            if (isLoadingMore || displayedGames.length >= allGames.length) return;

            isLoadingMore = true;
            const currentLength = displayedGames.length;
            const nextBatch = allGames.slice(currentLength, currentLength + 20);

            if (nextBatch.length === 0) return;

            // Mostrar indicador de carregamento
            const grid = document.getElementById('gamesGrid');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading';
            loadingDiv.innerHTML = '<div class="loading-spinner"></div><p>Carregando mais jogos...</p>';
            grid.appendChild(loadingDiv);

            // Adicionar √† lista exibida
            displayedGames = displayedGames.concat(nextBatch);

            // Remover indicador e renderizar b√°sico
            loadingDiv.remove();
            renderGamesSmart(displayedGames);

            // Carregar detalhes em background
            loadGameDetailsBackground(nextBatch);

            isLoadingMore = false;
        }

        // Atualizar card individual
        function updateGameCard(slug, details) {
            const card = document.querySelector(`[data-slug="${slug}"]`);
            if (!card) return;

            const rating = parseFloat(details.rating) || 0;
            const stars = generateStars(rating);

            // Atualizar poster
            const poster = card.querySelector('.game-poster');
            if (details.cover) {
                poster.style.backgroundImage = `url(${details.cover})`;
                poster.classList.remove('loading');
                poster.textContent = '';
            }

            // Atualizar meta informa√ß√µes
            const meta = card.querySelector('.game-meta');
            meta.innerHTML = `
                <span>üìÖ ${details.year}</span>
                <span>üéÆ ${details.developer}</span>
            `;

            // Atualizar g√™neros
            const genres = card.querySelector('.game-genres');
            genres.innerHTML = details.genre !== 'N/A' ?
                details.genre.split(',').slice(0, 1).map(g =>
                    `<span class="genre-tag">${g.trim()}</span>`
                ).join('') :
                '<span class="genre-tag">G√™nero n√£o dispon√≠vel</span>';

            // Atualizar avalia√ß√£o
            const ratingDiv = card.querySelector('.game-rating');
            ratingDiv.innerHTML = `
                <div class="rating-stars">${stars}</div>
                <span>${normalizeRating(details.rating)}/10</span>
            `;

            // Atualizar sinopse
            const plot = card.querySelector('.game-plot');
            plot.textContent = details.summary;

            // Atualizar filtros dinamicamente
            populateFilters();
        }

        // Aguarda at√© que todos os detalhes estejam carregados antes de popular os filtros
        async function waitForAllDetailsAndPopulateFilters() {
            while (gamesWithDetails.size !== allGames.length) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            populateFilters();
        }
    </script>
</body>
</html>
